SET(CPACK_PACKAGING_INSTALL_PREFIX "/usr")
SET(CPACK_PACKAGE_FILE_NAME	${CPACK_PACKAGE_NAME})

if (BUILD_DRIVER_ONLY)
	SET(CPACK_PACKAGE_NAME "accel-pptp-kmod")
	SET(CPACK_PACKAGE_DESCRIPTION_SUMMARY "accel-pptp kernel module")
	SET(CPACK_DEBIAN_PACKAGE_CONTROL_EXTRA "${CMAKE_CURRENT_SOURCE_DIR}/cmake/debian-kmod/postinst")
	INSTALL(FILES ${CMAKE_CURRENT_BINARY_DIR}/driver/driver/pptp.ko DESTINATION lib/modules/${DEBIAN_KDIR}/extra)
	#SET(CPACK_DEBIAN_PACKAGE_DEPENDS "linux-image (= ${LINUX_IMAGE})")
else (BUILD_DRIVER_ONLY)
	SET(CPACK_DEBIAN_PACKAGE_DEPENDS "libc6 (>= 2.7), libssl0.9.8 (>= 0.9.8), libpcre3 (>= 7.6)")
	SET(CPACK_DEBIAN_PACKAGE_CONTROL_EXTRA "${CMAKE_CURRENT_SOURCE_DIR}/cmake/debian/postinst;${CMAKE_CURRENT_SOURCE_DIR}/cmake/debian/conffiles")

	INSTALL(FILES ${CMAKE_HOME_DIRECTORY}/accel-pptpd/accel-pptp.conf DESTINATION ${CMAKE_BINARY_DIR}/_CPack_Packages/Linux/DEB/${CPACK_PACKAGE_FILE_NAME}/etc	 RENAME accel-pptp.conf.dist)
	INSTALL(FILES ${CMAKE_HOME_DIRECTORY}/contrib/debian/accel-pptp-init DESTINATION ${CMAKE_BINARY_DIR}/_CPack_Packages/Linux/DEB/${CPACK_PACKAGE_FILE_NAME}/etc/init.d RENAME accel-pptp)
	INSTALL(FILES ${CMAKE_HOME_DIRECTORY}/contrib/debian/accel-pptp-default DESTINATION ${CMAKE_BINARY_DIR}/_CPack_Packages/Linux/DEB/${CPACK_PACKAGE_FILE_NAME}/etc/default RENAME accel-pptp)
endif (BUILD_DRIVER_ONLY)
